<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Digits</title>
</head>
<body>
<h1>Digit prediction </h1>
<div>
    <form action="" method="post" enctype="multipart/form-data">
        <h3>Introduce your digit</h3>
        <input id="inputImage" type="file" name="digit" accept="image/*" required>
        <br>
        <input type="submit" value="Predict">
    </form>
</div>

<br>
<div class="result">
    <!--    <p>Digit: <span class="digit"></span></p>-->
    <!--    <p>Score: <span class="digit"></span></p>-->
</div>

</body>

<script>
    console.log('hola')

    const myForm = document.querySelector('form')
    const inputImage = document.querySelector('#inputImage')
    const response = document.querySelector('.result')

    myForm.addEventListener('submit', (e) => {
        e.preventDefault()


        const formData = new FormData();
        formData.append('digit', inputImage.files[0]);

        fetch('http://localhost:5000/predict', {
            method: 'POST',
            body: formData,
        })
            .then(response => response.json())
            .then(data => {
                response.innerHTML = `<p>API Response: ${JSON.stringify(data)}</p>`;
            })
            .catch(error => {
                response.innerHTML = `<p>Error: ${error.message}</p>`;
            });
    })
</script>
</html>
